/*! jquery.nthEverything - v0.1 - 2012-12-15
 *  https://github.com/FWeinb/nthEverything
 *  Copyright (c) 2012 Fabrice Weinberg (http://fabrice.weinberg.me/)
 */
(function(e){e.fn.nthEverything=function(){var t="-nthEvery",n=/\s*(.*?)\s*\{(.*?)\}/g,r=/\s*(?!<\")\/\*[^\*]+\*\/(?!\")\s*/gm,i=/([^:]+)/g,s=/(\w*)-(\w*)(\((even|odd|[\+-n\d]{1,6})\))?/,o=/(\s*[^ ]+\s*)/g,u=/\s+/,a,f={},l="",c=function(e,t,n,r,i){var s=0,o=+e,u,a,f,l,c,h,p=-1;e==="odd"||e==="even"?(o=e==="odd"?1:2,s=2):/^\d+$/.test(e)?(o=e-i,s=0):(f=/^(\+|-)?\d+/.exec(e),l=/(\+|-)?\d+$/.exec(e),o=l?+l[0]:1,s=f?+f[0]:1,c=f?f.length-1:0,h=l?l.length:0,e.substr(c,e.length-h-c).charAt(0)==="-"&&(s*=-1)),o--;for(a=o;a<r;a+=s){if(a<0||a===p)break;n[a]===undefined?n[a]=t:n[a]+=" "+t,p=a}},h=function(e,t){return'<span class="'+e+'">'+t+"</span>"},p=function(e,t){var n="",r,i;for(r=0;r<e.length;r++)i=e[r],i===undefined?n+=t[r]:n+=h(i,t[r]);return n},d=function(e,t,n){var r=new Array(t),i;for(i=0;i<e.period.length;i++)c(n(e.period[i],t),e.className[i],r,t);return r},v={word:function(e){return e.match(o)},letter:function(e){return e.split("")}},m={first:{word:function(e){return e==="firstword"&&(e="1"),e}},last:{word:function(e,t,n){return e==="lastword"&&(e=""+t.match(o).length),e}},nth:{letter:function(e){return e},word:function(e){return e}}},g=function(t,n,r){var i=r.func,s,o,u,f,l,h;return t.each(function(){if(this.nodeType===1)g(e(this).contents(),n,r);else if(this.nodeType===3){s=v[i](this.nodeValue),o=s.length,u=new Array(o);for(var t=0;t<r.period.length;t++)f=r.className[t],l=r.cat[t],h=r.period[t],c(m[l][i](h,n,o),f,u,o,a);e(this).replaceWith(p(u,s)),a+=o}}),a},y=function(e){var o,u,a=!1,c,h,p,d,v,m,g,y,b,w,E,S,x,T;e=e.replace(r,"").replace(/\n|\r/g,"");while((o=n.exec(e))!==null){p=o[1].split(","),d=o[2];for(c=0;c<p.length;c++)v=p[c],m=v.match(i),v=m.shift(),g=m.shift(),y=m.length!==0?":"+m.join(":"):"",(u=s.exec(g))!==null?(a=!0,b=u[1],w=u[2],E=u[4]!==undefined?u[4]:b+w,S=v.replace("#","id").replace(".","class"),x=S+w,T=S+b+w+E+t,(h=f[x])!==undefined?(h.className.push(T),h.period.push(E),h.style.push(d),h.pseudo.push(y),h.cat.push(b)):f[x]={element:v,func:w,className:[T],cat:[b],period:[E],style:[d],pseudo:[y]}):a===!0&&(l+=v+"{"+d+"}")}},b=function(){var t,n,r,i;for(t in f){n=f[t],r=n.func,e(n.element).each(function(){var t=e(this);a=0,g(t.contents(),t.text(),n)});for(i=0;i<n.className.length;i++)l+="."+n.className[i]+n.pseudo[i]+"{"+n.style[i]+"}"}e("<style>"+l+"</style>").appendTo("head")};e("link[rel=stylesheet],style").each(function(){e(this).is("link")?e.get(this.href).success(function(e){y(e)}):y(e(this).text())}),b()}})(jQuery),$.fn.nthEverything();